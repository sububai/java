第四章：对象的组合

1、设计线程安全的类
  基本要素
    找出构成对象状态的所有变量
    找出约束状态变量的不可变条件
    建立对象状态的并发访问管理策略
  满足的条件
    先验条件：满足条件才能改变
    后验条件：改变之后满足的条件
    不可变条件：什么时候不可变

2、实例封闭(instance confinement)
  如果对象不是线程安全的，可以使用线程封闭和加锁来安全访问
3、为一个现有线程安全类添加功能
  添加代码到该类
  继承
  用辅助类
  组合
